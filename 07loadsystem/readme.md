
В репозитори находятся файл вирт. машины [Vagrantfile](Vagrantfile). 
Файл [logvgs.txt](logvgs.txt), работа с vgs. 
Файл [mod-init.txt](mod-init.txt), работа с модулем в initrd. 


##  Попасть в систему без пароля несколькими способами:


### 1. init=/bin/sh:
#### 1. Добавляем в конец строки linux 16 init=/bin/sh в загрузчике;
#### 2. Нажимаем ctrl-x. Попадаем в систему. Для смены пароля или произвести запись в файл, необходимо смонтировать корневую систему в режим rw;
-  Выполняем команду mount -o remount,rw /;
-  Если мы изменим что-либо в корневой системе, необходимо выполнить перемариковку Selinux создав файл .autorelabel в корне;

### 2.  rd.break:
#### 1. Добавляем в конец строки linux 16 rd.break в загрузчике;
#### 2. Нажимаем ctrl-x. Попадаем в однопользовательский режим - emergency mode. Корневая файловая система смонитирована;
   -  Если необходимо выполнить изменения в корневой фс: mount -o remount,rw /sysroot;
   -  Переходим в окружения chroot: chroot /sysroot. Выполняем необходимые изменения и создаем файла .autorelabel в корне;

### 3. rw init=/sysroot/bin/sh:
#### 1. В начале строки linux 16 заменяем ro на rw init=/sysroot/bin/sh в загрузчике;
#### 2. Нажимаем ctrl-x. Попадаем в систему. Корневая файловая система смонитирована уже в режиме записи;

### Разница 1 спобособа от 2 и 3 не требуется переходить в окружение chroot. 
Перезагружаем систему в 1 способе через команду exec /sbin/init 6. При каждом способе, требовалось убирать в загрузчике со словом и далее console=. Для отработки маркировки файловой системы selinux добавлял в загрузчик enforcing=0 autorelabel=1.



## Установить систему с LVM, после чего переименовать VG. добавить модуль initrd:

### - Проверяем какие vgs есть, командой vgs;
### - Переименовываем vgs командой vgrename;
### - После переименовывания правим след. конф. файлы /etc/fstab, /etc/default/grub, /boot/grub2/grub.cfg;
### - Пересоздаем initrd image, т.к. мы изменили имя volume group, для обращения. Команда mkinitrd -f -v /boot/initramfs-$(uname -r).img $(uname -r);
### - Перезагружаемся и проверяем новое имя vgs;


```
[root@lvm ~]# vgs
  VG        #PV #LV #SN Attr   VSize   VFree
  VGNEW      1   2   0 wz--n- <38,97g    0 
```

### 6. Модуль inird. Создаём папку в каталоге где хранятся модули, для добавления своего модуля. В нем помещаем два скрипта. Первый скрипт устанавливает сам модуль, второй вызывает скрипт, это рисунок. После пересобираем образ initrd. Операции отражены в [mod-init.txt](mod-init.txt);  
